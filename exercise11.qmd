---
title: "Homework Assignment 3"
author: "Vincent Xie"
toc: true
number-sections: true
highlight-style: pygments
format: 
  pdf: 
    geometry: 
      - top=30mm
      - left=20mm
---

# **NYC Rats** {.unnumbered}

Rats in NYC are widespread, as they are in many densely populated
areas (https://en.wikipedia.org/wiki/Rats_in_New_York_City). As of 
October 2023, NYC dropped from the 2nd to the 3rd places in the 
annual ["rattiest city" list](https://www.orkin.com/press-room/top-rodent-infested-cities-2023#)
released by a pest control company. In 
the 311 Service Request Data, there is one complain type `Rodent`. 
Extract all the requests with complain type `Rodent`, created 
between January 1, 2022 and December 31, 2023. Save them into a 
csv file named `rodent_2022-2023.csv`.

```{python}
import numpy as np
import pandas as pd

data = pd.read_csv("data/rodent_2022-2023.csv")
```

1. Are there any complains that are not closed yet?

```{python}
not_closed = data['Closed Date'].isna().sum()
not_closed
```

2. Are there any complains with a closed data before the created date?

```{python}
# Converting dates to datetime format for comparison
data['Created Date'] = pd.to_datetime(data['Created Date'], errors='coerce')
data['Closed Date'] = pd.to_datetime(data['Closed Date'], errors='coerce')
closed_before_created = data[data['Closed Date'] < data['Created Date']].shape[0]
closed_before_created
```

3. How many agencies were this complain type reported to?

```{python}
unique_agencies = data['Agency'].nunique()
unique_agencies
```

4. Summarize the missingess for each variable.

```{python}
missingness_sum = data.isnull().sum() 
missingness_avg = data.isnull().mean() * 100
missingness_sum, missingness_avg
```

5. Summarize a frequency table for the DESCRIPTOR variable, and summarize a cross table by year.
6. Which types of ‘DESCRIPTOR’ do you think should be included if our interest is rodent sighting?
7. Take a subset of the data with the descriptors you chose and summarize the response time by borough